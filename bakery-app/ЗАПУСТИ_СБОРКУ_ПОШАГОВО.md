# Пошаговая сборка APK

## Проблема решена!

Я исправил:
- ✅ Android Gradle Plugin обновлён до 8.1.1
- ✅ Kotlin обновлён до 1.9.0
- ✅ expo-modules-core откачен до совместимой версии 1.11.8
- ✅ Google Services плагин настроен правильно

## Запускай скрипты по порядку:

### Шаг 1: Установка зависимостей
Запусти: `1-install-deps.bat`

Это переустановит все npm пакеты с правильными версиями.

### Шаг 2: Очистка Gradle
Запусти: `2-clean-gradle.bat`

Это очистит кэш Android Gradle.

### Шаг 3: Expo Prebuild
Запусти: `3-prebuild.bat`

Это пересоздаст нативные папки Android с правильной конфигурацией.

### Шаг 4: Сборка APK
Запусти: `4-build-apk.bat`

Это соберёт финальный APK файл.

## Если всё равно ошибка

Попробуй в Android Studio:
1. File → Invalidate Caches → Invalidate and Restart
2. Build → Clean Project
3. Build → Rebuild Project
4. Build → Build Bundle(s) / APK(s) → Build APK(s)

## Что было исправлено

### android/build.gradle
```gradle
classpath('com.android.tools.build:gradle:8.1.1')
classpath("org.jetbrains.kotlin:kotlin-gradle-plugin:1.9.0")
classpath('com.google.gms:google-services:4.4.0')
```

### android/app/build.gradle
```gradle
// Условное применение Google Services
def googleServicesFile = file('google-services.json')
if (googleServicesFile.exists()) {
    apply plugin: 'com.google.gms.google-services'
}
```

### package.json
```json
"expo-modules-core": "~1.11.8"
```

## Альтернатива - обновить до Expo SDK 51

Если хочешь использовать новейшие версии:

```bash
npx expo install expo@latest
npx expo install --fix
```

Но это может потребовать обновления других зависимостей.
