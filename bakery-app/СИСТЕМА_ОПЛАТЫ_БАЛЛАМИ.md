# ‚úÖ –°–∏—Å—Ç–µ–º–∞ –æ–ø–ª–∞—Ç—ã –±–∞–ª–ª–∞–º–∏

## –ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç

### –ö—É—Ä—Å –æ–±–º–µ–Ω–∞
**10 –±–∞–ª–ª–æ–≤ = 1‚ÇΩ**

–ü—Ä–∏–º–µ—Ä:
- –£ –≤–∞—Å 1130 –±–∞–ª–ª–æ–≤ ‚Üí –º–æ–∂–Ω–æ –ø–æ–ª—É—á–∏—Ç—å —Å–∫–∏–¥–∫—É 113‚ÇΩ
- –£ –≤–∞—Å 500 –±–∞–ª–ª–æ–≤ ‚Üí –º–æ–∂–Ω–æ –ø–æ–ª—É—á–∏—Ç—å —Å–∫–∏–¥–∫—É 50‚ÇΩ

### –ú–∏–Ω–∏–º—É–º –¥–ª—è —Å–ø–∏—Å–∞–Ω–∏—è
–ú–∏–Ω–∏–º—É–º **10 –±–∞–ª–ª–æ–≤** (1‚ÇΩ) –¥–ª—è –∞–∫—Ç–∏–≤–∞—Ü–∏–∏ —Å–∫–∏–¥–∫–∏

## –ì–¥–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è

### 1. –ö–æ—Ä–∑–∏–Ω–∞
–í –∫–æ—Ä–∑–∏–Ω–µ –ø–æ—è–≤–ª—è–µ—Ç—Å—è –ø–µ—Ä–µ–∫–ª—é—á–∞—Ç–µ–ª—å "–°–ø–∏—Å–∞—Ç—å –±–∞–ª–ª—ã" –µ—Å–ª–∏:
- –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω
- –ë–∞–ª–∞–Ω—Å –±–∞–ª–ª–æ–≤ ‚â• 100

#### –ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å
```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ üí∞ –°–ø–∏—Å–∞—Ç—å –±–∞–ª–ª—ã                    ‚îÇ
‚îÇ –í–∞—à –±–∞–ª–∞–Ω—Å: 1200 ‚âà 12‚ÇΩ         [ON] ‚îÇ
‚îÇ                                     ‚îÇ
‚îÇ ‚úì –ë—É–¥–µ—Ç —Å–ø–∏—Å–∞–Ω–æ: 1200 –±–∞–ª–ª–æ–≤ (-12‚ÇΩ)‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

### 2. –†–∞—Å—á—ë—Ç —Å–∫–∏–¥–∫–∏
–°–∫–∏–¥–∫–∞ —Ä–∞—Å—Å—á–∏—Ç—ã–≤–∞–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏:

```typescript
// –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è —Å–∫–∏–¥–∫–∞ –≤ —Ä—É–±–ª—è—Ö
const maxDiscount = Math.floor(bonusPoints / 10);

// –°–∫–∏–¥–∫–∞ –Ω–µ –º–æ–∂–µ—Ç –±—ã—Ç—å –±–æ–ª—å—à–µ —Å—É–º–º—ã –∑–∞–∫–∞–∑–∞
const discount = Math.min(maxDiscount, orderTotal);

// –°–∫–æ–ª—å–∫–æ –±–∞–ª–ª–æ–≤ —Å–ø–∏—à–µ—Ç—Å—è
const pointsToSpend = discount * 10;
```

#### –ü—Ä–∏–º–µ—Ä —Ä–∞—Å—á—ë—Ç–∞

**–°—Ü–µ–Ω–∞—Ä–∏–π 1: –ë–∞–ª–ª–æ–≤ –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ**
- –°—É–º–º–∞ –∑–∞–∫–∞–∑–∞: 500‚ÇΩ
- –ë–∞–ª–ª–æ–≤: 1130 (= 113‚ÇΩ)
- –°–∫–∏–¥–∫–∞: 113‚ÇΩ
- –ö –æ–ø–ª–∞—Ç–µ: 387‚ÇΩ
- –°–ø–∏—Å–∞–Ω–æ –±–∞–ª–ª–æ–≤: 1130

**–°—Ü–µ–Ω–∞—Ä–∏–π 2: –ë–∞–ª–ª–æ–≤ –±–æ–ª—å—à–µ —á–µ–º —Å—É–º–º–∞**
- –°—É–º–º–∞ –∑–∞–∫–∞–∑–∞: 300‚ÇΩ
- –ë–∞–ª–ª–æ–≤: 5000 (= 500‚ÇΩ)
- –°–∫–∏–¥–∫–∞: 300‚ÇΩ (–º–∞–∫—Å–∏–º—É–º = —Å—É–º–º–∞ –∑–∞–∫–∞–∑–∞)
- –ö –æ–ø–ª–∞—Ç–µ: 0‚ÇΩ
- –°–ø–∏—Å–∞–Ω–æ –±–∞–ª–ª–æ–≤: 3000

**–°—Ü–µ–Ω–∞—Ä–∏–π 3: –ë–∞–ª–ª–æ–≤ –º–∞–ª–æ**
- –°—É–º–º–∞ –∑–∞–∫–∞–∑–∞: 1000‚ÇΩ
- –ë–∞–ª–ª–æ–≤: 25 (= 2.5‚ÇΩ, –Ω–æ –æ–∫—Ä—É–≥–ª—è–µ—Ç—Å—è –¥–æ 2‚ÇΩ)
- –°–∫–∏–¥–∫–∞: 2‚ÇΩ
- –ö –æ–ø–ª–∞—Ç–µ: 998‚ÇΩ
- –°–ø–∏—Å–∞–Ω–æ –±–∞–ª–ª–æ–≤: 20

## –õ–æ–≥–∏–∫–∞ —Å–ø–∏—Å–∞–Ω–∏—è

### –ü—Ä–∏ –æ—Ñ–æ—Ä–º–ª–µ–Ω–∏–∏ –∑–∞–∫–∞–∑–∞
1. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤–∫–ª—é—á–∞–µ—Ç –ø–µ—Ä–µ–∫–ª—é—á–∞—Ç–µ–ª—å "–°–ø–∏—Å–∞—Ç—å –±–∞–ª–ª—ã"
2. –°–∏—Å—Ç–µ–º–∞ —Ä–∞—Å—Å—á–∏—Ç—ã–≤–∞–µ—Ç —Å–∫–∏–¥–∫—É
3. –ü—Ä–∏ –Ω–∞–∂–∞—Ç–∏–∏ "–û—Ñ–æ—Ä–º–∏—Ç—å" –±–∞–ª–ª—ã **—Å—Ä–∞–∑—É —Å–ø–∏—Å—ã–≤–∞—é—Ç—Å—è** –∏–∑ –ø—Ä–æ—Ñ–∏–ª—è
4. –ó–∞–∫–∞–∑ —Å–æ–∑–¥–∞—ë—Ç—Å—è —Å–æ —Å–∫–∏–¥–∫–æ–π

```typescript
// –°–ø–∏—Å—ã–≤–∞–µ–º –±–∞–ª–ª—ã –°–†–ê–ó–£ –ø—Ä–∏ –æ—Ñ–æ—Ä–º–ª–µ–Ω–∏–∏
if (usePoints && pointsToSpend > 0) {
  const newBalance = (profile.bonus_points || 0) - pointsToSpend;
  await updateProfile({ bonus_points: newBalance });
}
```

### –ü—Ä–∏ –¥–æ—Å—Ç–∞–≤–∫–µ –∑–∞–∫–∞–∑–∞
–ß–µ—Ä–µ–∑ 60 —Å–µ–∫—É–Ω–¥ –ø–æ—Å–ª–µ –æ—Ñ–æ—Ä–º–ª–µ–Ω–∏—è:
1. –°—Ç–∞—Ç—É—Å –∑–∞–∫–∞–∑–∞ –º–µ–Ω—è–µ—Ç—Å—è –Ω–∞ "delivered"
2. –ù–∞—á–∏—Å–ª—è—é—Ç—Å—è –Ω–æ–≤—ã–µ –±–∞–ª–ª—ã (5% –æ—Ç —Å—É–º–º—ã –∑–∞–∫–∞–∑–∞)

```typescript
// –ù–∞—á–∏—Å–ª–µ–Ω–∏–µ: 5% –æ—Ç –∏—Ç–æ–≥–æ–≤–æ–π —Å—É–º–º—ã
const earnedPoints = Math.floor(finalTotal * 0.05);
```

## –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –≤ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–µ

### –ö–æ—Ä–∑–∏–Ω–∞ - –ò—Ç–æ–≥–æ
```
–¢–æ–≤–∞—Ä—ã (3):           1200‚ÇΩ
–°–∫–∏–¥–∫–∞:               -240‚ÇΩ  (–ø—Ä–æ–º–æ–∫–æ–¥)
–°–∫–∏–¥–∫–∞ –±–∞–ª–ª–∞–º–∏:       -12‚ÇΩ   (1200 –±–∞–ª–ª–æ–≤)
–î–æ—Å—Ç–∞–≤–∫–∞:             –ë–µ—Å–ø–ª–∞—Ç–Ω–æ
‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
–ö –æ–ø–ª–∞—Ç–µ:             948‚ÇΩ

–í—ã –ø–æ–ª—É—á–∏—Ç–µ +47 –±–∞–ª–ª–æ–≤ (5%)
```

### –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è
–ü—Ä–∏ –æ—Ñ–æ—Ä–º–ª–µ–Ω–∏–∏ –∑–∞–∫–∞–∑–∞:
```
‚úÖ –ó–∞–∫–∞–∑ –æ—Ñ–æ—Ä–º–ª–µ–Ω! üéâ
–ó–∞–∫–∞–∑ #A1B2C3D4. –°—É–º–º–∞: 948‚ÇΩ
–°–ø–∏—Å–∞–Ω–æ 1200 –±–∞–ª–ª–æ–≤
```

–ü—Ä–∏ –¥–æ—Å—Ç–∞–≤–∫–µ:
```
‚úÖ –ó–∞–∫–∞–∑ –¥–æ—Å—Ç–∞–≤–ª–µ–Ω! üéâ
–í–∞—à –∑–∞–∫–∞–∑ #A1B2C3D4 —É—Å–ø–µ—à–Ω–æ –¥–æ—Å—Ç–∞–≤–ª–µ–Ω

üéÅ +47 –±–æ–Ω—É—Å–Ω—ã—Ö –±–∞–ª–ª–æ–≤!
–ë–∞–ª–ª—ã –∑–∞—á–∏—Å–ª–µ–Ω—ã –Ω–∞ –≤–∞—à —Å—á—ë—Ç
```

## –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö

### –¢–∞–±–ª–∏—Ü–∞ orders
–î–æ–±–∞–≤–ª–µ–Ω–æ –ø–æ–ª–µ `points_spent`:

```sql
ALTER TABLE orders 
ADD COLUMN points_spent INTEGER DEFAULT 0;
```

–≠—Ç–æ –ø–æ–∑–≤–æ–ª—è–µ—Ç –æ—Ç—Å–ª–µ–∂–∏–≤–∞—Ç—å, —Å–∫–æ–ª—å–∫–æ –±–∞–ª–ª–æ–≤ –±—ã–ª–æ –ø–æ—Ç—Ä–∞—á–µ–Ω–æ –Ω–∞ –∫–∞–∂–¥—ã–π –∑–∞–∫–∞–∑.

### –¢–∞–±–ª–∏—Ü–∞ profiles
–ü–æ–ª–µ `bonus_points` –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è:
- **–ú–∏–Ω—É—Å** –ø—Ä–∏ –æ—Ñ–æ—Ä–º–ª–µ–Ω–∏–∏ –∑–∞–∫–∞–∑–∞ (–µ—Å–ª–∏ –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –±–∞–ª–ª—ã)
- **–ü–ª—é—Å** –ø—Ä–∏ –¥–æ—Å—Ç–∞–≤–∫–µ –∑–∞–∫–∞–∑–∞ (–Ω–∞—á–∏—Å–ª–µ–Ω–∏–µ 5%)

## –ü–µ—Ä–µ–≤–æ–¥—ã

–î–æ–±–∞–≤–ª–µ–Ω—ã –∫–ª—é—á–∏ –¥–ª—è –≤—Å–µ—Ö —è–∑—ã–∫–æ–≤:

```typescript
cart_use_points: '–°–ø–∏—Å–∞—Ç—å –±–∞–ª–ª—ã',
cart_points_balance: '–í–∞—à –±–∞–ª–∞–Ω—Å',
cart_points_discount: '–°–∫–∏–¥–∫–∞ –±–∞–ª–ª–∞–º–∏',
cart_points_to_spend: '–ë—É–¥–µ—Ç —Å–ø–∏—Å–∞–Ω–æ',
cart_to_pay: '–ö –æ–ø–ª–∞—Ç–µ',
```

–ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–µ —è–∑—ã–∫–∏:
- üá∑üá∫ –†—É—Å—Å–∫–∏–π
- üá¨üáß English
- üá∞üáø “ö–∞–∑–∞“õ—à–∞
- üè¥ –¢–∞—Ç–∞—Ä—á–∞
- üá∫üáø O'zbek
- üá¶üá≤ ’Ä’°’µ’•÷Ä’•’∂

## –ò–∑–º–µ–Ω—ë–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã

### 1. `app/(tabs)/cart.tsx`
- –î–æ–±–∞–≤–ª–µ–Ω state `usePoints`
- –î–æ–±–∞–≤–ª–µ–Ω–∞ —Ñ—É–Ω–∫—Ü–∏—è `calculatePointsDiscount()`
- –î–æ–±–∞–≤–ª–µ–Ω UI –ø–µ—Ä–µ–∫–ª—é—á–∞—Ç–µ–ª—è –±–∞–ª–ª–æ–≤
- –û–±–Ω–æ–≤–ª—ë–Ω —Ä–∞—Å—á—ë—Ç –∏—Ç–æ–≥–æ–≤–æ–π —Å—É–º–º—ã
- –î–æ–±–∞–≤–ª–µ–Ω–æ —Å–ø–∏—Å–∞–Ω–∏–µ –±–∞–ª–ª–æ–≤ –ø—Ä–∏ –æ—Ñ–æ—Ä–º–ª–µ–Ω–∏–∏

### 2. `src/context/SettingsContext.tsx`
- –î–æ–±–∞–≤–ª–µ–Ω—ã –ø–µ—Ä–µ–≤–æ–¥—ã –¥–ª—è —Å–∏—Å—Ç–µ–º—ã –±–∞–ª–ª–æ–≤
- –û–±–Ω–æ–≤–ª–µ–Ω–∞ —Ñ—É–Ω–∫—Ü–∏—è `t()` –¥–ª—è –ø–æ–¥–¥–µ—Ä–∂–∫–∏ –≤—Å–µ—Ö —è–∑—ã–∫–æ–≤

## –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

### –í–∫–ª—é—á–∏—Ç—å —Å–ø–∏—Å–∞–Ω–∏–µ –±–∞–ª–ª–æ–≤
```typescript
const [usePoints, setUsePoints] = useState(false);

<TouchableOpacity onPress={() => setUsePoints(!usePoints)}>
  <Text>–°–ø–∏—Å–∞—Ç—å –±–∞–ª–ª—ã</Text>
</TouchableOpacity>
```

### –†–∞—Å—Å—á–∏—Ç–∞—Ç—å —Å–∫–∏–¥–∫—É
```typescript
const pointsDiscount = calculatePointsDiscount();
const finalTotal = total - discount - pointsDiscount + deliveryFee;
```

### –°–ø–∏—Å–∞—Ç—å –±–∞–ª–ª—ã
```typescript
if (usePoints && pointsToSpend > 0) {
  const newBalance = (profile.bonus_points || 0) - pointsToSpend;
  await updateProfile({ bonus_points: newBalance });
}
```

## –†–µ–∑—É–ª—å—Ç–∞—Ç

‚úÖ –°–∏—Å—Ç–µ–º–∞ –æ–ø–ª–∞—Ç—ã –±–∞–ª–ª–∞–º–∏ —Ä–∞–±–æ—Ç–∞–µ—Ç
‚úÖ 100 –±–∞–ª–ª–æ–≤ = 1‚ÇΩ
‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π —Ä–∞—Å—á—ë—Ç —Å–∫–∏–¥–∫–∏
‚úÖ –°–ø–∏—Å–∞–Ω–∏–µ –ø—Ä–∏ –æ—Ñ–æ—Ä–º–ª–µ–Ω–∏–∏
‚úÖ –ù–∞—á–∏—Å–ª–µ–Ω–∏–µ –ø—Ä–∏ –¥–æ—Å—Ç–∞–≤–∫–µ
‚úÖ –ü–µ—Ä–µ–≤–æ–¥—ã –Ω–∞ 6 —è–∑—ã–∫–æ–≤
‚úÖ –ö—Ä–∞—Å–∏–≤—ã–π UI —Å –ø–µ—Ä–µ–∫–ª—é—á–∞—Ç–µ–ª–µ–º

