# ‚ö° –ò–°–ü–†–ê–í–¨ OAUTH –ü–†–Ø–ú–û –°–ï–ô–ß–ê–°

## üö® –ü—Ä–æ–±–ª–µ–º–∞

–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –∞–≤—Ç–æ—Ä–∏–∑—É–µ—Ç—Å—è —á–µ—Ä–µ–∑ Google, –ø–æ—è–≤–ª—è–µ—Ç—Å—è –≤ –±–∞–∑–µ, –Ω–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –Ω–µ –ø–æ–ª—É—á–∞–µ—Ç —Å–µ—Å—Å–∏—é.

---

## üéØ –†–ï–®–ï–ù–ò–ï (5 –º–∏–Ω—É—Ç)

### –®–∞–≥ 1: –ù–∞—Å—Ç—Ä–æ–π Supabase

1. –û—Ç–∫—Ä–æ–π https://supabase.com/dashboard
2. –í—ã–±–µ—Ä–∏ –ø—Ä–æ–µ–∫—Ç
3. **SQL Editor** ‚Üí **New query**
4. –°–∫–æ–ø–∏—Ä—É–π –∏ –≤—ã–ø–æ–ª–Ω–∏ –≤–µ—Å—å SQL –∏–∑ —Ñ–∞–π–ª–∞:

```
–ù–ê–°–¢–†–û–ô–ö–ê_OAUTH_–ü–û–õ–ù–ê–Ø.sql
```

5. –ù–∞–∂–º–∏ **RUN**

–≠—Ç–æ —Å–æ–∑–¥–∞—Å—Ç:
- ‚úÖ –¢–∞–±–ª–∏—Ü—É –ø—Ä–æ—Ñ–∏–ª–µ–π
- ‚úÖ –¢—Ä–∏–≥–≥–µ—Ä –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ —Å–æ–∑–¥–∞–Ω–∏—è –ø—Ä–æ—Ñ–∏–ª—è
- ‚úÖ –ü—Ä–æ—Ñ–∏–ª–∏ –¥–ª—è —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π

---

### –®–∞–≥ 2: –î–æ–±–∞–≤—å Redirect URL

1. –í —Ç–æ–º –∂–µ Supabase Dashboard
2. **Authentication** ‚Üí **URL Configuration**
3. **Redirect URLs** ‚Üí –î–æ–±–∞–≤—å:

```
bakery-app://auth-callback
```

4. **Save**

---

### –®–∞–≥ 3: –ü–µ—Ä–µ—Å–æ–±–µ—Ä–∏ APK

```bash
cd bakery-app/bakery-mobile-app/bakery-app/android
./gradlew clean
./gradlew assembleRelease
```

---

### –®–∞–≥ 4: –¢–µ—Å—Ç–∏—Ä—É–π!

1. –£—Å—Ç–∞–Ω–æ–≤–∏ –Ω–æ–≤—ã–π APK
2. –ù–∞–∂–º–∏ "–í–æ–π—Ç–∏ —á–µ—Ä–µ–∑ Google"
3. –ê–≤—Ç–æ—Ä–∏–∑—É–π—Å—è
4. –î–æ–ª–∂–Ω–æ –≤–µ—Ä–Ω—É—Ç—å—Å—è –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –∏ –ø–æ–∫–∞–∑–∞—Ç—å –≥–ª–∞–≤–Ω—ã–π —ç–∫—Ä–∞–Ω!

---

## üîç –ü–†–û–í–ï–†–ö–ê

### –°–º–æ—Ç—Ä–∏ –ª–æ–≥–∏ –≤ –∫–æ–Ω—Å–æ–ª–∏:

```bash
npx react-native log-android
```

–î–æ–ª–∂–Ω–æ –±—ã—Ç—å:
```
üîê Starting Google Sign In...
‚úÖ OAuth data received
üì± Opening URL in browser
‚úÖ URL opened successfully
üîó Deep link received: bakery-app://auth-callback?access_token=...
‚úÖ OAuth callback detected
üîë Tokens found: { hasAccessToken: true, hasRefreshToken: true }
‚úÖ Session set successfully!
```

---

## üì± –ü–†–û–í–ï–†–ö–ê –í –ë–ê–ó–ï

### –ü—Ä–æ–≤–µ—Ä—å, —á—Ç–æ –ø—Ä–æ—Ñ–∏–ª—å —Å–æ–∑–¥–∞–ª—Å—è:

1. Supabase Dashboard ‚Üí **Table Editor** ‚Üí **profiles**
2. –ù–∞–π–¥–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –ø–æ email
3. –î–æ–ª–∂–Ω—ã –±—ã—Ç—å:
   - ‚úÖ id (UUID)
   - ‚úÖ email
   - ‚úÖ full_name (–∏–∑ Google)
   - ‚úÖ avatar_url (–∏–∑ Google)

---

## ‚ö†Ô∏è –ï—Å–ª–∏ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç

### 1. –ü—Ä–æ–≤–µ—Ä—å —Ç—Ä–∏–≥–≥–µ—Ä:

```sql
SELECT * FROM pg_trigger WHERE tgname = 'on_auth_user_created';
```

–î–æ–ª–∂–Ω–∞ –±—ã—Ç—å 1 —Å—Ç—Ä–æ–∫–∞.

### 2. –ü—Ä–æ–≤–µ—Ä—å –ø—Ä–æ—Ñ–∏–ª–∏:

```sql
SELECT COUNT(*) FROM profiles;
```

–î–æ–ª–∂–Ω–æ –±—ã—Ç—å —Å—Ç–æ–ª—å–∫–æ –∂–µ, —Å–∫–æ–ª—å–∫–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π.

### 3. –°–æ–∑–¥–∞–π –ø—Ä–æ—Ñ–∏–ª—å –≤—Ä—É—á–Ω—É—é:

```sql
INSERT INTO profiles (id, email, full_name)
SELECT id, email, raw_user_meta_data->>'name'
FROM auth.users
WHERE id = 'USER_ID_–ó–î–ï–°–¨';
```

---

## ‚úÖ –ì–û–¢–û–í–û!

–ü–æ—Å–ª–µ —ç—Ç–∏—Ö —à–∞–≥–æ–≤ OAuth –¥–æ–ª–∂–µ–Ω —Ä–∞–±–æ—Ç–∞—Ç—å:
1. –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è —á–µ—Ä–µ–∑ Google
2. –°–æ–∑–¥–∞–Ω–∏–µ –ø—Ä–æ—Ñ–∏–ª—è
3. –í–æ–∑–≤—Ä–∞—Ç –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
4. –í—Ö–æ–¥ –≤ —Å–∏—Å—Ç–µ–º—É

**–¢–µ—Å—Ç–∏—Ä—É–π!** üéâ
