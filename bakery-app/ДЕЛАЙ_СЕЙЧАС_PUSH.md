# üîî –ß–¢–û –î–ï–õ–ê–¢–¨ –°–ï–ô–ß–ê–° - Push-—É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è

## ‚úÖ –ß—Ç–æ —É–∂–µ —Å–¥–µ–ª–∞–Ω–æ

1. ‚úÖ –û–±–Ω–æ–≤–ª—ë–Ω –∫–æ–¥ –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å FCM —Ç–æ–∫–µ–Ω–∞–º–∏
2. ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–∞ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è —Ç–æ–∫–µ–Ω–∞ –ø—Ä–∏ –≤—Ö–æ–¥–µ
3. ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–æ —É–¥–∞–ª–µ–Ω–∏–µ —Ç–æ–∫–µ–Ω–∞ –ø—Ä–∏ –≤—ã—Ö–æ–¥–µ
4. ‚úÖ –°–æ–∑–¥–∞–Ω—ã SQL —Å–∫—Ä–∏–ø—Ç—ã –¥–ª—è –ë–î
5. ‚úÖ –°–æ–∑–¥–∞–Ω –∫–æ–¥ Edge Function

## üìã –ß—Ç–æ –Ω—É–∂–Ω–æ —Å–¥–µ–ª–∞—Ç—å –¢–ï–ë–ï

### –®–∞–≥ 1: –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –ø–∞–∫–µ—Ç—ã (2 –º–∏–Ω—É—Ç—ã)

```bash
# –ó–∞–ø—É—Å—Ç–∏ —ç—Ç–æ—Ç —Ñ–∞–π–ª:
install-push-packages.bat
```

–ò–ª–∏ –≤—Ä—É—á–Ω—É—é:
```bash
cd bakery-app/bakery-mobile-app/bakery-app
npx expo install expo-device expo-application
```

### –®–∞–≥ 2: –ù–∞—Å—Ç—Ä–æ–∏—Ç—å Firebase (10 –º–∏–Ω—É—Ç)

1. –ó–∞–π–¥–∏ –Ω–∞ https://console.firebase.google.com/
2. –°–æ–∑–¥–∞–π –Ω–æ–≤—ã–π –ø—Ä–æ–µ–∫—Ç (–∏–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–π —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π)
3. –î–æ–±–∞–≤—å Android –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ:
   - Package name: `com.bakeryapp`
   - –°–∫–∞—á–∞–π `google-services.json`
   - –ü–æ–ª–æ–∂–∏ –≤ `android/app/google-services.json`

4. –í Firebase Console ‚Üí Project Settings ‚Üí Cloud Messaging:
   - –°–∫–æ–ø–∏—Ä—É–π **Server Key**
   - –°–æ—Ö—Ä–∞–Ω–∏ –µ–≥–æ, –ø–æ–Ω–∞–¥–æ–±–∏—Ç—Å—è –¥–ª—è Edge Function

5. –û–±–Ω–æ–≤–∏—Ç—å `android/build.gradle`:
```gradle
dependencies {
    classpath 'com.android.tools.build:gradle:7.4.2'
    classpath 'com.google.gms:google-services:4.4.0'  // ‚Üê –î–æ–±–∞–≤—å —ç—Ç—É —Å—Ç—Ä–æ–∫—É
}
```

6. –û–±–Ω–æ–≤–∏—Ç—å `android/app/build.gradle` (–≤ —Å–∞–º—ã–π –∫–æ–Ω–µ—Ü —Ñ–∞–π–ª–∞):
```gradle
apply plugin: 'com.google.gms.google-services'  // ‚Üê –î–æ–±–∞–≤—å —ç—Ç—É —Å—Ç—Ä–æ–∫—É
```

### –®–∞–≥ 3: –ù–∞—Å—Ç—Ä–æ–∏—Ç—å Supabase –ë–î (5 –º–∏–Ω—É—Ç)

1. –û—Ç–∫—Ä–æ–π Supabase Dashboard ‚Üí SQL Editor
2. –°–∫–æ–ø–∏—Ä—É–π –≤–µ—Å—å –∫–æ–¥ –∏–∑ —Ñ–∞–π–ª–∞ `–ù–ê–°–¢–†–û–ô–ö–ê_PUSH_–ë–î.sql`
3. –ó–∞–º–µ–Ω–∏ –≤ –∫–æ–¥–µ:
   - `YOUR_PROJECT_REF` ‚Üí —Ç–≤–æ–π Project Reference (–∏–∑ URL)
   - `YOUR_ANON_KEY` ‚Üí —Ç–≤–æ–π Anon Key (Settings ‚Üí API)
4. –í—ã–ø–æ–ª–Ω–∏ SQL

### –®–∞–≥ 4: –°–æ–∑–¥–∞—Ç—å Edge Function (5 –º–∏–Ω—É—Ç)

1. –û—Ç–∫—Ä–æ–π Supabase Dashboard ‚Üí Edge Functions
2. –ù–∞–∂–º–∏ "Create new function"
3. –ù–∞–∑–≤–∞–Ω–∏–µ: `send-push-notification`
4. –°–∫–æ–ø–∏—Ä—É–π –∫–æ–¥ –∏–∑ —Ñ–∞–π–ª–∞ `supabase-edge-function-send-push.ts`
5. –ó–∞–º–µ–Ω–∏ `YOUR_FIREBASE_SERVER_KEY` –Ω–∞ —Å–≤–æ–π Server Key –∏–∑ Firebase
6. Deploy —Ñ—É–Ω–∫—Ü–∏—é

### –®–∞–≥ 5: –û–±–Ω–æ–≤–∏—Ç—å Expo Project ID (1 –º–∏–Ω—É—Ç–∞)

–í —Ñ–∞–π–ª–µ `src/utils/notifications.ts` –∑–∞–º–µ–Ω–∏:
```typescript
projectId: 'your-project-id'  // ‚Üê –ó–∞–º–µ–Ω–∏ –Ω–∞ —Å–≤–æ–π Expo Project ID
```

–ù–∞–π—Ç–∏ –º–æ–∂–Ω–æ –≤ `app.json` –∏–ª–∏ –Ω–∞ https://expo.dev

### –®–∞–≥ 6: –°–æ–±—Ä–∞—Ç—å –Ω–æ–≤—ã–π APK

```bash
# –ó–∞–ø—É—Å—Ç–∏:
build-apk.bat
```

## üéâ –ì–æ—Ç–æ–≤–æ!

–¢–µ–ø–µ—Ä—å:
- ‚úÖ –õ–æ–∫–∞–ª—å–Ω—ã–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è —Ä–∞–±–æ—Ç–∞—é—Ç (–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –æ—Ç–∫—Ä—ã—Ç–æ)
- ‚úÖ Push-—É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è —Ä–∞–±–æ—Ç–∞—é—Ç (–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –∑–∞–∫—Ä—ã—Ç–æ)
- ‚úÖ –í—Å—ë –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —á–µ—Ä–µ–∑ Database Trigger

## üß™ –ö–∞–∫ –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å

1. –£—Å—Ç–∞–Ω–æ–≤–∏ –Ω–æ–≤—ã–π APK –Ω–∞ —Ç–µ–ª–µ—Ñ–æ–Ω
2. –í–æ–π–¥–∏ –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
3. –ó–∞–∫—Ä–æ–π –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –ø–æ–ª–Ω–æ—Å—Ç—å—é
4. –û—Ç–∫—Ä–æ–π –∞–¥–º–∏–Ω–∫—É —á–∞—Ç–∞ (admin-chat.html)
5. –û—Ç–ø—Ä–∞–≤—å —Å–æ–æ–±—â–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é
6. Push-—É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –¥–æ–ª–∂–Ω–æ –ø—Ä–∏–π—Ç–∏ –Ω–∞ —Ç–µ–ª–µ—Ñ–æ–Ω! üîî

## ‚ùì –ï—Å–ª–∏ —á—Ç–æ-—Ç–æ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç

–ü—Ä–æ–≤–µ—Ä—å –ª–æ–≥–∏:
- –í Supabase: Edge Functions ‚Üí Logs
- –í Firebase: Cloud Messaging ‚Üí Reports
- –í –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏: Logcat –≤ Android Studio
