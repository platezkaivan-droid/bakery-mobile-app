# ✅ УВЕДОМЛЕНИЯ: ОДНО ЗАМЕНЯЕТ ДРУГОЕ

## Что изменено

Теперь при добавлении нового уведомления оно **заменяет** предыдущее, а не показывается вместе с ним.

---

## До изменения:

```
┌──────────────────────────────┐
│ ✅ Добавлено в корзину       │  ← Первое
│    Пончик глазированный      │
└──────────────────────────────┘

┌──────────────────────────────┐
│ ✅ Добавлено в корзину       │  ← Второе (показывается вместе)
│    Булочка с корицей         │
└──────────────────────────────┘

┌──────────────────────────────┐
│ ✅ Добавлено в корзину       │  ← Третье (показывается вместе)
│    Датская булочка           │
└──────────────────────────────┘
```

**Проблема:** Уведомления накапливаются и перекрывают экран.

---

## После изменения:

```
┌──────────────────────────────┐
│ ✅ Добавлено в корзину       │  ← Первое
│    Пончик глазированный      │
└──────────────────────────────┘

        ↓ Добавляем второе

┌──────────────────────────────┐
│ ✅ Добавлено в корзину       │  ← Второе (заменило первое)
│    Булочка с корицей         │
└──────────────────────────────┘

        ↓ Добавляем третье

┌──────────────────────────────┐
│ ✅ Добавлено в корзину       │  ← Третье (заменило второе)
│    Датская булочка           │
└──────────────────────────────┘
```

**Решение:** Всегда показывается только одно уведомление.

---

## Что изменилось в коде

### Было:
```typescript
setNotifications(prev => {
  // ...проверка дубликатов...
  
  // Ограничиваем максимум 3 уведомления одновременно
  const updated = [...prev, newNotification];
  return updated.slice(-3);  // Показываем до 3 уведомлений
});
```

### Стало:
```typescript
setNotifications(prev => {
  // ...проверка дубликатов...
  
  // Новое уведомление заменяет все предыдущие
  return [newNotification];  // Показываем только одно
});
```

---

## Преимущества

### ✅ Плюсы:
- Не перекрывает экран
- Всегда видно последнее действие
- Чистый интерфейс
- Не отвлекает от работы

### ⚠️ Особенности:
- Если быстро добавить 3 товара, увидите только последний
- Предыдущие уведомления исчезают сразу

---

## Как это работает

### Сценарий 1: Добавление товаров подряд
```
1. Добавили "Круассан" → Показалось уведомление
2. Добавили "Синнабон" → Уведомление "Круассан" исчезло, показалось "Синнабон"
3. Добавили "Пончик" → Уведомление "Синнабон" исчезло, показалось "Пончик"
```

### Сценарий 2: Разные типы уведомлений
```
1. Добавили в корзину → ✅ Зелёное уведомление
2. Ошибка → ❌ Красное уведомление (заменило зелёное)
3. Успех → ✅ Зелёное уведомление (заменило красное)
```

---

## Защита от дубликатов

Защита от дубликатов **осталась**:
- Если добавить один и тот же товар дважды подряд → второе уведомление не покажется
- Это предотвращает случайные двойные клики

```typescript
// Проверка дубликатов (осталась без изменений)
const isDuplicate = prev.some(n => 
  n.title === notification.title && 
  n.message === notification.message &&
  n.type === notification.type
);

if (isDuplicate) {
  console.log('⚠️ Дубликат заблокирован');
  return prev;
}
```

---

## Тестирование

### Что проверить:
1. Добавьте 3 товара подряд быстро
   - ✅ Должно показаться только последнее уведомление
   
2. Добавьте товар, подождите 3 секунды, добавьте ещё
   - ✅ Первое исчезнет, покажется второе
   
3. Добавьте один товар дважды подряд
   - ✅ Второе уведомление не покажется (дубликат)
   
4. Добавьте в корзину, потом в избранное
   - ✅ Уведомление "Избранное" заменит "Корзина"

---

## Альтернативные варианты

Если нужно показывать несколько уведомлений:

### Вариант 1: Показывать 2 уведомления
```typescript
return [...prev, newNotification].slice(-2);
```

### Вариант 2: Показывать 3 уведомления (как было)
```typescript
return [...prev, newNotification].slice(-3);
```

### Вариант 3: Только одно (текущее)
```typescript
return [newNotification];  // ✅ Используется сейчас
```

---

**Файл:** `src/context/NotificationContext.tsx`  
**Изменено:** Логика показа уведомлений  
**Результат:** Новое уведомление заменяет предыдущее  
**Статус:** ✅ Готово
