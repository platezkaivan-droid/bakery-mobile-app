# üìã –ü–õ–ê–ù –ù–ê –°–ï–ì–û–î–ù–Ø: 4 –ó–ê–î–ê–ß–ò

## üéØ –¶–µ–ª–∏:
1. ‚úÖ –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è —á–µ—Ä–µ–∑ Google
2. ‚úÖ Email –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ —Å Deep Links
3. ‚úÖ –ß–∞—Ç –ø–æ–¥–¥–µ—Ä–∂–∫–∏
4. ‚úÖ –ò–∫–æ–Ω–∫–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è

---

## –ó–ê–î–ê–ß–ê 1: –ò–ö–û–ù–ö–ê –ü–†–ò–õ–û–ñ–ï–ù–ò–Ø (5 –º–∏–Ω—É—Ç) ‚≠ê –ù–ê–ß–ù–Å–ú –° –≠–¢–û–ì–û

### –ü–æ—á–µ–º—É –ø–µ—Ä–≤—ã–º –¥–µ–ª–æ–º:
–≠—Ç–æ —Å–∞–º–æ–µ –ø—Ä–æ—Å—Ç–æ–µ –∏ –±—ã—Å—Ç—Ä–æ–µ. –°–¥–µ–ª–∞–µ–º –∑–∞ 5 –º–∏–Ω—É—Ç –∏ –ø–æ–ª—É—á–∏–º –º–æ—Ä–∞–ª—å–Ω—ã–π –±—É—Å—Ç! üöÄ

### –®–∞–≥–∏:

#### 1.1 –ü–æ–¥–≥–æ—Ç–æ–≤—å—Ç–µ –ª–æ–≥–æ—Ç–∏–ø
- –§–æ—Ä–º–∞—Ç: PNG —Å –ø—Ä–æ–∑—Ä–∞—á–Ω—ã–º —Ñ–æ–Ω–æ–º
- –†–∞–∑–º–µ—Ä: –º–∏–Ω–∏–º—É–º 1024x1024 px
- –ù–∞–∑–≤–∞–Ω–∏–µ: `icon.png`

#### 1.2 –ó–∞–º–µ–Ω–∏—Ç–µ –∏–∫–æ–Ω–∫—É –≤ Expo

**–í–∞—Ä–∏–∞–Ω—Ç –ê: –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)**

1. –ü–æ–ª–æ–∂–∏—Ç–µ `icon.png` –≤ –∫–æ—Ä–µ–Ω—å –ø—Ä–æ–µ–∫—Ç–∞
2. –û—Ç–∫—Ä–æ–π—Ç–µ `app.json`:
```json
{
  "expo": {
    "icon": "./assets/icon.png",
    "android": {
      "adaptiveIcon": {
        "foregroundImage": "./assets/adaptive-icon.png",
        "backgroundColor": "#FF6B35"
      }
    }
  }
}
```

3. –°–æ–∑–¥–∞–π—Ç–µ –∞–¥–∞–ø—Ç–∏–≤–Ω—É—é –∏–∫–æ–Ω–∫—É:
   - `adaptive-icon.png` - 1024x1024, –ª–æ–≥–æ—Ç–∏–ø –ø–æ —Ü–µ–Ω—Ç—Ä—É 512x512

**–í–∞—Ä–∏–∞–Ω—Ç –ë: –ß–µ—Ä–µ–∑ Android Studio**

1. –û—Ç–∫—Ä–æ–π—Ç–µ `android/` –≤ Android Studio
2. –ü–ö–ú –Ω–∞ `app` ‚Üí New ‚Üí Image Asset
3. Icon Type: Launcher Icons
4. Path: –≤—ã–±–µ—Ä–∏—Ç–µ –≤–∞—à `icon.png`
5. Next ‚Üí Finish

#### 1.3 –ü–µ—Ä–µ—Å–æ–±–µ—Ä–∏—Ç–µ APK

```bash
npx expo prebuild --clean
cd android
./gradlew assembleRelease
```

**–í—Ä–µ–º—è:** 5 –º–∏–Ω—É—Ç  
**–°–ª–æ–∂–Ω–æ—Å—Ç—å:** ‚≠ê –û—á–µ–Ω—å –ª–µ–≥–∫–æ

---

## –ó–ê–î–ê–ß–ê 2: DEEP LINKS –î–õ–Ø EMAIL (20 –º–∏–Ω—É—Ç)

### –¶–µ–ª—å:
–ü—Ä–∏ –∫–ª–∏–∫–µ –Ω–∞ "–ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç—å email" –≤ –ø–∏—Å—å–º–µ ‚Üí –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç—Å—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ

### –®–∞–≥–∏:

#### 2.1 –ù–∞—Å—Ç—Ä–æ–π—Ç–µ —Å—Ö–µ–º—É –≤ app.json

```json
{
  "expo": {
    "scheme": "sweetbakery",
    "android": {
      "intentFilters": [
        {
          "action": "VIEW",
          "autoVerify": true,
          "data": [
            {
              "scheme": "sweetbakery",
              "host": "auth-callback"
            }
          ],
          "category": ["BROWSABLE", "DEFAULT"]
        }
      ]
    }
  }
}
```

#### 2.2 –ù–∞—Å—Ç—Ä–æ–π—Ç–µ Supabase

1. –û—Ç–∫—Ä–æ–π—Ç–µ Supabase Dashboard
2. **Authentication** ‚Üí **URL Configuration**
3. **Site URL**: `https://your-domain.com` (–∏–ª–∏ `exp://localhost:8081`)
4. **Redirect URLs**: –î–æ–±–∞–≤—å—Ç–µ:
   ```
   sweetbakery://auth-callback
   exp://localhost:8081
   ```

#### 2.3 –û–±–Ω–æ–≤–∏—Ç–µ –∫–æ–¥ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏

–í `src/context/AuthContext.tsx`:

```typescript
const signUp = async (email: string, password: string, fullName: string) => {
  const { data, error } = await supabase.auth.signUp({
    email,
    password,
    options: {
      data: { full_name: fullName },
      emailRedirectTo: 'sweetbakery://auth-callback', // ‚Üê –î–æ–±–∞–≤—å—Ç–µ —ç—Ç–æ
    },
  });
  
  if (error) throw error;
  return data;
};
```

#### 2.4 –û–±—Ä–∞–±–æ—Ç–∞–π—Ç–µ Deep Link

–í `app/_layout.tsx`:

```typescript
import * as Linking from 'expo-linking';
import { useEffect } from 'react';

export default function RootLayout() {
  useEffect(() => {
    // –û–±—Ä–∞–±–æ—Ç–∫–∞ Deep Link
    const handleDeepLink = async (event: { url: string }) => {
      const { path, queryParams } = Linking.parse(event.url);
      
      if (path === 'auth-callback') {
        // Supabase –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ–±—Ä–∞–±–æ—Ç–∞–µ—Ç —Ç–æ–∫–µ–Ω
        console.log('Email –ø–æ–¥—Ç–≤–µ—Ä–∂–¥—ë–Ω!');
      }
    };

    // –ü–æ–¥–ø–∏—Å–∫–∞ –Ω–∞ Deep Links
    const subscription = Linking.addEventListener('url', handleDeepLink);

    // –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–∏ –∑–∞–ø—É—Å–∫–µ
    Linking.getInitialURL().then((url) => {
      if (url) handleDeepLink({ url });
    });

    return () => subscription.remove();
  }, []);

  return <Stack />;
}
```

#### 2.5 –°—Ç–∏–ª–∏–∑—É–π—Ç–µ Email —à–∞–±–ª–æ–Ω

1. Supabase ‚Üí **Authentication** ‚Üí **Email Templates**
2. –í—ã–±–µ—Ä–∏—Ç–µ **Confirm signup**
3. –ó–∞–º–µ–Ω–∏—Ç–µ HTML:

```html
<!DOCTYPE html>
<html>
<head>
  <style>
    body { font-family: Arial, sans-serif; background: #f5f5f5; padding: 20px; }
    .container { max-width: 600px; margin: 0 auto; background: white; border-radius: 16px; padding: 40px; }
    .logo { text-align: center; margin-bottom: 30px; }
    .logo img { width: 120px; }
    h1 { color: #FF6B35; text-align: center; }
    .button { display: inline-block; background: #FF6B35; color: white; padding: 16px 32px; border-radius: 12px; text-decoration: none; font-weight: bold; }
    .footer { text-align: center; color: #999; margin-top: 30px; font-size: 12px; }
  </style>
</head>
<body>
  <div class="container">
    <div class="logo">
      <img src="https://your-domain.com/logo.png" alt="Sweet Bakery">
    </div>
    <h1>üç∞ –î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å –≤ Sweet Bakery!</h1>
    <p>–°–ø–∞—Å–∏–±–æ –∑–∞ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—é! –ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç–µ –≤–∞—à email, —á—Ç–æ–±—ã –Ω–∞—á–∞—Ç—å –∑–∞–∫–∞–∑—ã–≤–∞—Ç—å —Å–≤–µ–∂—É—é –≤—ã–ø–µ—á–∫—É.</p>
    <p style="text-align: center; margin: 40px 0;">
      <a href="{{ .ConfirmationURL }}" class="button">–ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç—å Email</a>
    </p>
    <div class="footer">
      <p>–ï—Å–ª–∏ –≤—ã –Ω–µ —Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–ª–∏—Å—å, –ø—Ä–æ—Å—Ç–æ –ø—Ä–æ–∏–≥–Ω–æ—Ä–∏—Ä—É–π—Ç–µ —ç—Ç–æ –ø–∏—Å—å–º–æ.</p>
    </div>
  </div>
</body>
</html>
```

**–í—Ä–µ–º—è:** 20 –º–∏–Ω—É—Ç  
**–°–ª–æ–∂–Ω–æ—Å—Ç—å:** ‚≠ê‚≠ê –°—Ä–µ–¥–Ω–µ

---

## –ó–ê–î–ê–ß–ê 3: GOOGLE AUTH (30 –º–∏–Ω—É—Ç)

### –®–∞–≥–∏:

#### 3.1 Google Cloud Console

1. https://console.cloud.google.com
2. –°–æ–∑–¥–∞–π—Ç–µ –ø—Ä–æ–µ–∫—Ç "Sweet Bakery"
3. **APIs & Services** ‚Üí **OAuth consent screen**
   - User Type: External
   - App name: Sweet Bakery
   - User support email: –≤–∞—à email
   - Developer contact: –≤–∞—à email
4. **Credentials** ‚Üí **Create Credentials** ‚Üí **OAuth client ID**
   - Application type: **Web application**
   - Name: Sweet Bakery Web
   - Authorized redirect URIs:
     ```
     https://YOUR_PROJECT_REF.supabase.co/auth/v1/callback
     ```
   - –°–∫–æ–ø–∏—Ä—É–π—Ç–µ **Client ID** –∏ **Client Secret**

#### 3.2 Supabase Dashboard

1. **Authentication** ‚Üí **Providers** ‚Üí **Google**
2. Enable: ‚úÖ
3. –í—Å—Ç–∞–≤—å—Ç–µ Client ID –∏ Client Secret
4. Save

#### 3.3 –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏

```bash
npx expo install expo-auth-session expo-crypto
```

#### 3.4 –î–æ–±–∞–≤—å—Ç–µ Google Sign-In

–°–æ–∑–¥–∞–π—Ç–µ `src/hooks/useGoogleAuth.ts`:

```typescript
import { useEffect } from 'react';
import * as WebBrowser from 'expo-web-browser';
import { makeRedirectUri } from 'expo-auth-session';
import { supabase } from '../lib/supabase';

WebBrowser.maybeCompleteAuthSession();

export const useGoogleAuth = () => {
  const redirectUrl = makeRedirectUri({
    scheme: 'sweetbakery',
    path: 'auth-callback',
  });

  const signInWithGoogle = async () => {
    try {
      const { data, error } = await supabase.auth.signInWithOAuth({
        provider: 'google',
        options: {
          redirectTo: redirectUrl,
        },
      });

      if (error) throw error;
      
      // –û—Ç–∫—Ä–æ–µ—Ç—Å—è –±—Ä–∞—É–∑–µ—Ä –¥–ª—è –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏
      if (data?.url) {
        await WebBrowser.openAuthSessionAsync(data.url, redirectUrl);
      }
    } catch (error) {
      console.error('Google Sign-In error:', error);
      throw error;
    }
  };

  return { signInWithGoogle };
};
```

#### 3.5 –î–æ–±–∞–≤—å—Ç–µ –∫–Ω–æ–ø–∫—É –Ω–∞ –≥–ª–∞–≤–Ω—É—é

–í `app/(tabs)/home.tsx`:

```typescript
import { useGoogleAuth } from '../../src/hooks/useGoogleAuth';

export default function HomeScreen() {
  const { signInWithGoogle } = useGoogleAuth();
  const { user } = useAuth();
  const { showNotification } = useNotification();

  const handleGoogleSignIn = async () => {
    try {
      await signInWithGoogle();
      showNotification({
        type: 'success',
        title: '–£—Å–ø–µ—à–Ω–æ',
        message: '–í—ã –≤–æ—à–ª–∏ —á–µ—Ä–µ–∑ Google',
      });
    } catch (error) {
      showNotification({
        type: 'error',
        title: '–û—à–∏–±–∫–∞',
        message: '–ù–µ —É–¥–∞–ª–æ—Å—å –≤–æ–π—Ç–∏ —á–µ—Ä–µ–∑ Google',
      });
    }
  };

  return (
    <View>
      {!user && (
        <TouchableOpacity 
          style={styles.googleButton} 
          onPress={handleGoogleSignIn}
        >
          <Ionicons name="logo-google" size={20} color="#fff" />
          <Text style={styles.googleButtonText}>–í–æ–π—Ç–∏ —á–µ—Ä–µ–∑ Google</Text>
        </TouchableOpacity>
      )}
    </View>
  );
}

const styles = StyleSheet.create({
  googleButton: {
    flexDirection: 'row',
    alignItems: 'center',
    justifyContent: 'center',
    backgroundColor: '#4285F4',
    paddingVertical: 14,
    paddingHorizontal: 24,
    borderRadius: 12,
    gap: 10,
    marginHorizontal: 20,
    marginTop: 16,
  },
  googleButtonText: {
    color: '#fff',
    fontSize: 16,
    fontWeight: '600',
  },
});
```

**–í—Ä–µ–º—è:** 30 –º–∏–Ω—É—Ç  
**–°–ª–æ–∂–Ω–æ—Å—Ç—å:** ‚≠ê‚≠ê‚≠ê –°—Ä–µ–¥–Ω–µ-—Å–ª–æ–∂–Ω–æ

---

## –ó–ê–î–ê–ß–ê 4: –ß–ê–¢ –ü–û–î–î–ï–†–ñ–ö–ò (15 –º–∏–Ω—É—Ç)

### –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è: –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –≥–æ—Ç–æ–≤–æ–µ —Ä–µ—à–µ–Ω–∏–µ

#### –í–∞—Ä–∏–∞–Ω—Ç –ê: Crisp Chat (–†–ï–ö–û–ú–ï–ù–î–£–ï–¢–°–Ø)

**–ü–æ—á–µ–º—É Crisp:**
- ‚úÖ –ë–µ—Å–ø–ª–∞—Ç–Ω—ã–π —Ç–∞—Ä–∏—Ñ
- ‚úÖ –ü—Ä–æ—Å—Ç–∞—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è
- ‚úÖ –ú–æ–±–∏–ª—å–Ω–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –¥–ª—è –∞–¥–º–∏–Ω–∞
- ‚úÖ –ü–æ–¥–¥–µ—Ä–∂–∫–∞ React Native

**–®–∞–≥–∏:**

1. –ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–π—Ç–µ—Å—å –Ω–∞ https://crisp.chat
2. –°–æ–∑–¥–∞–π—Ç–µ —Å–∞–π—Ç "Sweet Bakery App"
3. –ü–æ–ª—É—á–∏—Ç–µ Website ID

4. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ:
```bash
npm install react-native-crisp-chat-sdk
```

5. –°–æ–∑–¥–∞–π—Ç–µ `src/components/SupportChat.tsx`:

```typescript
import { CrispChatSDK } from 'react-native-crisp-chat-sdk';
import { useEffect } from 'react';
import { useAuth } from '../context/AuthContext';

export const useSupportChat = () => {
  const { user, profile } = useAuth();

  useEffect(() => {
    // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è Crisp
    CrispChatSDK.configure('YOUR_WEBSITE_ID');

    // –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –¥–∞–Ω–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
    if (user && profile) {
      CrispChatSDK.setUserEmail(user.email);
      CrispChatSDK.setUserNickname(profile.full_name);
    }
  }, [user, profile]);

  const openChat = () => {
    CrispChatSDK.show();
  };

  return { openChat };
};
```

6. –î–æ–±–∞–≤—å—Ç–µ –∫–Ω–æ–ø–∫—É –≤ –ø—Ä–æ—Ñ–∏–ª—å (`app/(tabs)/profile.tsx`):

```typescript
import { useSupportChat } from '../../src/components/SupportChat';

export default function ProfileScreen() {
  const { openChat } = useSupportChat();

  return (
    <TouchableOpacity style={styles.menuItem} onPress={openChat}>
      <View style={styles.menuItemLeft}>
        <View style={styles.menuIcon}>
          <Ionicons name="chatbubbles-outline" size={20} color={colors.primary} />
        </View>
        <Text style={styles.menuItemText}>–ü–æ–¥–¥–µ—Ä–∂–∫–∞</Text>
      </View>
      <Ionicons name="chevron-forward" size={20} color={colors.textMuted} />
    </TouchableOpacity>
  );
}
```

#### –í–∞—Ä–∏–∞–Ω—Ç –ë: –°–≤–æ–π —á–∞—Ç –Ω–∞ Supabase (–µ—Å–ª–∏ –Ω—É–∂–µ–Ω –ø–æ–ª–Ω—ã–π –∫–æ–Ω—Ç—Ä–æ–ª—å)

–°–æ–∑–¥–∞–π—Ç–µ —Ç–∞–±–ª–∏—Ü—É:

```sql
CREATE TABLE support_messages (
  id UUID PRIMARY KEY DEFAULT uuid_generate_v4(),
  user_id UUID REFERENCES auth.users(id),
  message TEXT NOT NULL,
  is_admin_reply BOOLEAN DEFAULT false,
  created_at TIMESTAMP DEFAULT NOW()
);

-- –í–∫–ª—é—á–∏—Ç–µ Realtime
ALTER PUBLICATION supabase_realtime ADD TABLE support_messages;
```

**–í—Ä–µ–º—è:** 15 –º–∏–Ω—É—Ç (Crisp) / 2-3 —á–∞—Å–∞ (—Å–≤–æ–π)  
**–°–ª–æ–∂–Ω–æ—Å—Ç—å:** ‚≠ê –õ–µ–≥–∫–æ (Crisp) / ‚≠ê‚≠ê‚≠ê‚≠ê –°–ª–æ–∂–Ω–æ (—Å–≤–æ–π)

---

## üìã –ß–ï–ö–õ–ò–°–¢ –ù–ê –°–ï–ì–û–î–ù–Ø

### –£—Ç—Ä–æ (1 —á–∞—Å):
- [ ] –ó–∞–¥–∞—á–∞ 1: –ò–∫–æ–Ω–∫–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è (5 –º–∏–Ω)
- [ ] –ó–∞–¥–∞—á–∞ 2: Deep Links –¥–ª—è Email (20 –º–∏–Ω)
- [ ] –ó–∞–¥–∞—á–∞ 4: –ß–∞—Ç –ø–æ–¥–¥–µ—Ä–∂–∫–∏ - Crisp (15 –º–∏–Ω)
- [ ] –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ (20 –º–∏–Ω)

### –î–µ–Ω—å (1 —á–∞—Å):
- [ ] –ó–∞–¥–∞—á–∞ 3: Google Auth (30 –º–∏–Ω)
- [ ] –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ Google Auth (15 –º–∏–Ω)
- [ ] –§–∏–Ω–∞–ª—å–Ω–∞—è —Å–±–æ—Ä–∫–∞ APK (15 –º–∏–Ω)

### –í–µ—á–µ—Ä (30 –º–∏–Ω):
- [ ] –ü—É–±–ª–∏–∫–∞—Ü–∏—è –Ω–∞ GitHub
- [ ] –°–æ–∑–¥–∞–Ω–∏–µ —Ä–µ–ª–∏–∑–∞ v1.1.0
- [ ] –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

---

## üéØ –ü–†–ò–û–†–ò–¢–ï–¢–´

1. **–°–ù–ê–ß–ê–õ–ê:** –ò–∫–æ–Ω–∫–∞ (5 –º–∏–Ω) - –±—ã—Å—Ç—Ä–∞—è –ø–æ–±–µ–¥–∞!
2. **–ü–û–¢–û–ú:** Deep Links (20 –º–∏–Ω) - –≤–∞–∂–Ω–æ –¥–ª—è UX
3. **–ü–û–¢–û–ú:** Crisp Chat (15 –º–∏–Ω) - –±—ã—Å—Ç—Ä–æ –∏ —Ä–∞–±–æ—Ç–∞–µ—Ç
4. **–í –ö–û–ù–¶–ï:** Google Auth (30 –º–∏–Ω) - —Å–∞–º–æ–µ —Å–ª–æ–∂–Ω–æ–µ

**–û–±—â–µ–µ –≤—Ä–µ–º—è:** ~1.5 —á–∞—Å–∞ —á–∏—Å—Ç–æ–π —Ä–∞–±–æ—Ç—ã

---

## üìù –ü–û–õ–ï–ó–ù–´–ï –°–°–´–õ–ö–ò

- Expo Linking: https://docs.expo.dev/guides/linking/
- Supabase Auth: https://supabase.com/docs/guides/auth
- Crisp Chat: https://docs.crisp.chat/guides/chatbox-sdks/react-native/
- Google Cloud Console: https://console.cloud.google.com

---

**–î–∞—Ç–∞:** 4 –¥–µ–∫–∞–±—Ä—è 2025  
**–°—Ç–∞—Ç—É—Å:** üìã –ü–ª–∞–Ω –≥–æ—Ç–æ–≤, –Ω–∞—á–∏–Ω–∞–µ–º!
